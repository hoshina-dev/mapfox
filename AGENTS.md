# Mapfox

This is the frontend part of Mapfox project.

It is built using Next.js and Mantine for the UI components.

The pattern is BFF, basically the backend is not exposed to the client directly.

## Mantine UI

To prevent error with server components in Mantine, Component compounds (such as `Component.XXX`) cannot be used, instead using `ComponentXXX` instead.

Example with `ComponentXXX` syntax:

```tsx
import { Popover, PopoverDropdown, PopoverTarget } from "@mantine/core";

// No error
export default function Page() {
  return (
    <Popover>
      <PopoverTarget>Trigger</PopoverTarget>
      <PopoverDropdown>Dropdown</PopoverDropdown>
    </Popover>
  );
}
```

## Backend Components

### GAPI

GAPI is internal API related to map and geographical data. It is built with GraphQL and its API client is in `libs/apiClient.ts`

The types is generated by GraphQL Code Generator configured by `codegen.ts` and generated files are in `graphql/generated` where query used in the frontend are in `graphql/query`. Run `pnpm codegen:gql` every time graphql query is added or modified.

### CustAPI

CustAPI is internal API related to user related including organization user is associated with. It is built with RESTful API and its API client is in `libs/apiClient.ts`

It's code generation is handled by OpenAPI Generator configured by `openapitools.json` and generated files are in `libs/generated/custapi`. The pattern of this SDK is one client per OAS tag, therefore you can add one in `libs/apiClient.ts` if that tag is never used before.
